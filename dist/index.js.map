{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\n\nexport interface SpeechReaderOptions {\n  rate?: number;\n  pitch?: number;\n  voice?: SpeechSynthesisVoice;\n}\n\nexport interface SpeechReaderHook {\n  speak: (text: string) => void;\n  speaking: boolean;\n  voices: SpeechSynthesisVoice[];\n  setVoice: (voice: SpeechSynthesisVoice) => void;\n  setRate: (rate: number) => void;\n  setPitch: (pitch: number) => void;\n  pause: () => void;\n  resume: () => void;\n  cancel: () => void;\n}\n\nexport function useSpeechReader(options?: SpeechReaderOptions): SpeechReaderHook {\n  const [speaking, setSpeaking] = useState(false);\n  const [voices, setVoices] = useState<SpeechSynthesisVoice[]>([]);\n  const supported = typeof window !== 'undefined' && 'speechSynthesis' in window;\n\n  useEffect(() => {\n    if (!supported) return;\n\n    const updateVoices = () => {\n      setVoices(window.speechSynthesis.getVoices());\n    };\n\n    // Get initial voices\n    updateVoices();\n\n    // Listen for voice changes\n    window.speechSynthesis.onvoiceschanged = updateVoices;\n\n    return () => {\n      window.speechSynthesis.onvoiceschanged = null;\n    };\n  }, [supported]);\n\n  const speak = useCallback((text: string) => {\n    if (!supported) return;\n\n    // Cancel any ongoing speech\n    window.speechSynthesis.cancel();\n\n    const utterance = new SpeechSynthesisUtterance(text);\n    \n    if (options?.voice) utterance.voice = options.voice;\n    if (options?.rate) utterance.rate = options.rate;\n    if (options?.pitch) utterance.pitch = options.pitch;\n\n    utterance.onstart = () => setSpeaking(true);\n    utterance.onend = () => setSpeaking(false);\n    utterance.onerror = () => setSpeaking(false);\n\n    window.speechSynthesis.speak(utterance);\n  }, [supported, options]);\n\n  const pause = useCallback(() => {\n    if (!supported) return;\n    window.speechSynthesis.pause();\n  }, [supported]);\n\n  const resume = useCallback(() => {\n    if (!supported) return;\n    window.speechSynthesis.resume();\n  }, [supported]);\n\n  const cancel = useCallback(() => {\n    if (!supported) return;\n    window.speechSynthesis.cancel();\n    setSpeaking(false);\n  }, [supported]);\n\n  const setVoice = useCallback((voice: SpeechSynthesisVoice) => {\n    if (!supported) return;\n    window.speechSynthesis.cancel();\n  }, [supported]);\n\n  const setRate = useCallback((rate: number) => {\n    if (!supported) return;\n    window.speechSynthesis.cancel();\n  }, [supported]);\n\n  const setPitch = useCallback((pitch: number) => {\n    if (!supported) return;\n    window.speechSynthesis.cancel();\n  }, [supported]);\n\n  return {\n    speak,\n    pause,\n    resume,\n    cancel,\n    speaking,\n    voices,\n    setVoice,\n    setRate,\n    setPitch,\n  };\n} "],"names":["useState","useEffect","useCallback"],"mappings":";;;;;;AAoBM,SAAU,eAAe,CAAC,OAA6B,EAAA;IACrD,IAAA,EAAA,GAA0BA,cAAQ,CAAC,KAAK,CAAC,EAAxC,QAAQ,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,WAAW,GAAA,EAAA,CAAA,CAAA,CAAmB,CAAC;IAC1C,IAAA,EAAA,GAAsBA,cAAQ,CAAyB,EAAE,CAAC,EAAzD,MAAM,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,SAAS,GAAA,EAAA,CAAA,CAAA,CAAwC,CAAC;IACjE,IAAM,SAAS,GAAG,OAAO,MAAM,KAAK,WAAW,IAAI,iBAAiB,IAAI,MAAM,CAAC;AAE/E,IAAAC,eAAS,CAAC,YAAA;AACR,QAAA,IAAI,CAAC,SAAS;YAAE,OAAO;AAEvB,QAAA,IAAM,YAAY,GAAG,YAAA;YACnB,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC,CAAC;AAChD,SAAC,CAAC;;AAGF,QAAA,YAAY,EAAE,CAAC;;AAGf,QAAA,MAAM,CAAC,eAAe,CAAC,eAAe,GAAG,YAAY,CAAC;QAEtD,OAAO,YAAA;AACL,YAAA,MAAM,CAAC,eAAe,CAAC,eAAe,GAAG,IAAI,CAAC;AAChD,SAAC,CAAC;AACJ,KAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;AAEhB,IAAA,IAAM,KAAK,GAAGC,iBAAW,CAAC,UAAC,IAAY,EAAA;AACrC,QAAA,IAAI,CAAC,SAAS;YAAE,OAAO;;AAGvB,QAAA,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC;AAEhC,QAAA,IAAM,SAAS,GAAG,IAAI,wBAAwB,CAAC,IAAI,CAAC,CAAC;AAErD,QAAA,IAAI,OAAO,KAAP,IAAA,IAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,OAAO,CAAE,KAAK;AAAE,YAAA,SAAS,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;AACpD,QAAA,IAAI,OAAO,KAAP,IAAA,IAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,OAAO,CAAE,IAAI;AAAE,YAAA,SAAS,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;AACjD,QAAA,IAAI,OAAO,KAAP,IAAA,IAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,OAAO,CAAE,KAAK;AAAE,YAAA,SAAS,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;QAEpD,SAAS,CAAC,OAAO,GAAG,YAAM,EAAA,OAAA,WAAW,CAAC,IAAI,CAAC,CAAjB,EAAiB,CAAC;QAC5C,SAAS,CAAC,KAAK,GAAG,YAAM,EAAA,OAAA,WAAW,CAAC,KAAK,CAAC,CAAlB,EAAkB,CAAC;QAC3C,SAAS,CAAC,OAAO,GAAG,YAAM,EAAA,OAAA,WAAW,CAAC,KAAK,CAAC,CAAlB,EAAkB,CAAC;AAE7C,QAAA,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;AAC1C,KAAC,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC;IAEzB,IAAM,KAAK,GAAGA,iBAAW,CAAC,YAAA;AACxB,QAAA,IAAI,CAAC,SAAS;YAAE,OAAO;AACvB,QAAA,MAAM,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;AACjC,KAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAEhB,IAAM,MAAM,GAAGA,iBAAW,CAAC,YAAA;AACzB,QAAA,IAAI,CAAC,SAAS;YAAE,OAAO;AACvB,QAAA,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC;AAClC,KAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAEhB,IAAM,MAAM,GAAGA,iBAAW,CAAC,YAAA;AACzB,QAAA,IAAI,CAAC,SAAS;YAAE,OAAO;AACvB,QAAA,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC;QAChC,WAAW,CAAC,KAAK,CAAC,CAAC;AACrB,KAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;AAEhB,IAAA,IAAM,QAAQ,GAAGA,iBAAW,CAAC,UAAC,KAA2B,EAAA;AACvD,QAAA,IAAI,CAAC,SAAS;YAAE,OAAO;AACvB,QAAA,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC;AAClC,KAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;AAEhB,IAAA,IAAM,OAAO,GAAGA,iBAAW,CAAC,UAAC,IAAY,EAAA;AACvC,QAAA,IAAI,CAAC,SAAS;YAAE,OAAO;AACvB,QAAA,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC;AAClC,KAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;AAEhB,IAAA,IAAM,QAAQ,GAAGA,iBAAW,CAAC,UAAC,KAAa,EAAA;AACzC,QAAA,IAAI,CAAC,SAAS;YAAE,OAAO;AACvB,QAAA,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC;AAClC,KAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAEhB,OAAO;AACL,QAAA,KAAK,EAAA,KAAA;AACL,QAAA,KAAK,EAAA,KAAA;AACL,QAAA,MAAM,EAAA,MAAA;AACN,QAAA,MAAM,EAAA,MAAA;AACN,QAAA,QAAQ,EAAA,QAAA;AACR,QAAA,MAAM,EAAA,MAAA;AACN,QAAA,QAAQ,EAAA,QAAA;AACR,QAAA,OAAO,EAAA,OAAA;AACP,QAAA,QAAQ,EAAA,QAAA;KACT,CAAC;AACJ;;;;"}